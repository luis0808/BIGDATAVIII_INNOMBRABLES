-- MySQL Script generated by MySQL Workbench
-- Sat Sep  1 11:33:56 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`DM_CATEGORIA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DM_CATEGORIA` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DM_CATEGORIA` (
  `CODCAT` VARCHAR(2) NOT NULL,
  `DESCAT` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`CODCAT`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DM_PRODUCTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DM_PRODUCTO` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DM_PRODUCTO` (
  `CODPRO` VARCHAR(6) NOT NULL,
  `DESPRO` VARCHAR(100) NOT NULL,
  `PREPRO` DECIMAL NOT NULL,
  `CODCAT` VARCHAR(2) NOT NULL,
  PRIMARY KEY (`CODPRO`),
  INDEX `fk_DM_PRODUCTO_DM_CATEGORIA_idx` (`CODCAT` ASC) VISIBLE,
  CONSTRAINT `fk_DM_PRODUCTO_DM_CATEGORIA`
    FOREIGN KEY (`CODCAT`)
    REFERENCES `mydb`.`DM_CATEGORIA` (`CODCAT`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DM_UBIGEO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DM_UBIGEO` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DM_UBIGEO` (
  `CODUBI` VARCHAR(2) NOT NULL,
  `DESDEP` VARCHAR(100) NOT NULL,
  `DESPRO` VARCHAR(100) NOT NULL,
  `DESDIS` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`CODUBI`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DM_SUCURSAL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DM_SUCURSAL` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DM_SUCURSAL` (
  `CODSUC` VARCHAR(4) NOT NULL,
  `DESSUC` VARCHAR(50) NOT NULL,
  `DIRSUC` VARCHAR(200) NULL,
  `TELSUC` VARCHAR(20) NULL,
  `CODUBI` VARCHAR(2) NOT NULL,
  PRIMARY KEY (`CODSUC`),
  INDEX `fk_DM_SUCURSAL_DM_UBIGEO1_idx` (`CODUBI` ASC) VISIBLE,
  CONSTRAINT `fk_DM_SUCURSAL_DM_UBIGEO1`
    FOREIGN KEY (`CODUBI`)
    REFERENCES `mydb`.`DM_UBIGEO` (`CODUBI`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DM_SEGMENTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DM_SEGMENTO` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DM_SEGMENTO` (
  `CODSEG` VARCHAR(2) NOT NULL,
  `DESSEG` VARCHAR(50) NULL,
  PRIMARY KEY (`CODSEG`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DM_CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DM_CLIENTE` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DM_CLIENTE` (
  `CODCLI` INT NOT NULL,
  `TIPDOC` VARCHAR(1) NOT NULL,
  `NUMDOC` VARCHAR(20) NOT NULL,
  `NOMRAZSOC` VARCHAR(200) NOT NULL,
  `CODSEG` VARCHAR(2) NOT NULL,
  PRIMARY KEY (`CODCLI`),
  INDEX `fk_DM_CLIENTE_DM_SEGMENTO1_idx` (`CODSEG` ASC) VISIBLE,
  CONSTRAINT `fk_DM_CLIENTE_DM_SEGMENTO1`
    FOREIGN KEY (`CODSEG`)
    REFERENCES `mydb`.`DM_SEGMENTO` (`CODSEG`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DM_USUARIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DM_USUARIO` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DM_USUARIO` (
  `CODUSU` INT NOT NULL,
  `APEPAT` VARCHAR(100) NOT NULL,
  `APEMAT` VARCHAR(100) NOT NULL,
  `NOMUSU` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`CODUSU`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DM_PERIODO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DM_PERIODO` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DM_PERIODO` (
  `CODPER` INT NOT NULL,
  `ANIO` INT NOT NULL,
  `MES` INT NOT NULL,
  `DIA` INT NOT NULL,
  `NOMDIA` VARCHAR(20) NOT NULL,
  `TRIMESTRE` VARCHAR(2) NOT NULL,
  `NUMSEM` INT NOT NULL,
  PRIMARY KEY (`CODPER`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`FACT_VENTAS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`FACT_VENTAS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`FACT_VENTAS` (
  `CODPED` VARCHAR(20) NOT NULL,
  `CODPRO` VARCHAR(6) NOT NULL,
  `CODCLI` INT NOT NULL,
  `CODPER` INT NOT NULL,
  `CODSUC` VARCHAR(4) NOT NULL,
  `CODMES` INT NOT NULL,
  `CODCAJ` INT NOT NULL,
  `CANPRO` INT NOT NULL,
  `PREUNI` DECIMAL NOT NULL,
  `DSCPRO` DECIMAL NOT NULL,
  `TOTPRO` DECIMAL NOT NULL,
  PRIMARY KEY (`CODPED`, `CODPRO`),
  INDEX `fk_FACT_VENTAS_DM_PRODUCTO1_idx` (`CODPRO` ASC) VISIBLE,
  INDEX `fk_FACT_VENTAS_DM_CLIENTE1_idx` (`CODCLI` ASC) VISIBLE,
  INDEX `fk_FACT_VENTAS_DM_PERIODO1_idx` (`CODPER` ASC) VISIBLE,
  INDEX `fk_FACT_VENTAS_DM_USUARIO1_idx` (`CODMES` ASC) VISIBLE,
  INDEX `fk_FACT_VENTAS_DM_USUARIO2_idx` (`CODCAJ` ASC) VISIBLE,
  INDEX `fk_FACT_VENTAS_DM_SUCURSAL1_idx` (`CODSUC` ASC) VISIBLE,
  CONSTRAINT `fk_FACT_VENTAS_DM_PRODUCTO1`
    FOREIGN KEY (`CODPRO`)
    REFERENCES `mydb`.`DM_PRODUCTO` (`CODPRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_FACT_VENTAS_DM_CLIENTE1`
    FOREIGN KEY (`CODCLI`)
    REFERENCES `mydb`.`DM_CLIENTE` (`CODCLI`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_FACT_VENTAS_DM_PERIODO1`
    FOREIGN KEY (`CODPER`)
    REFERENCES `mydb`.`DM_PERIODO` (`CODPER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_FACT_VENTAS_DM_USUARIO1`
    FOREIGN KEY (`CODMES`)
    REFERENCES `mydb`.`DM_USUARIO` (`CODUSU`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_FACT_VENTAS_DM_USUARIO2`
    FOREIGN KEY (`CODCAJ`)
    REFERENCES `mydb`.`DM_USUARIO` (`CODUSU`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_FACT_VENTAS_DM_SUCURSAL1`
    FOREIGN KEY (`CODSUC`)
    REFERENCES `mydb`.`DM_SUCURSAL` (`CODSUC`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
